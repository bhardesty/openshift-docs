:_content-type: ASSEMBLY
[id="rosa-mobb-deploying-rhacs-rosa"]
= Tutorial: Deploying Red Hat Advanced Cluster Security in ROSA
include::_attributes/attributes-openshift-dedicated.adoc[]
:context: rosa-mobb-deploying-rhacs

toc::[]

//Mobb content metadata
//Brought into ROSA product docs 2023-09-20
//---
//date: '2022-10-06'
//title: Deploying Red Hat Advanced Cluster Security in ARO/ROSA
//aliases: ['/docs/security/rhacs.md']
//tags: ["ACS", "ARO", "ROSA"]
//authors:
//  - Roberto Carratal√°
//  - Connor Wooley
//---

This document is based in the link:https://redhat-scholars.github.io/acs-workshop/acs-workshop/index.html[RHACS workshop] and in the link:https://docs.openshift.com/acs/3.70/installing/install-ocp-operator.html[RHACS official documentation].

[id="{context}-prerequisites"]
== Prerequisites

* A ROSA cluster
* The OpenShift CLI (`oc`)
+
--
[NOTE]
====
To set up the OpenShift CLI (`oc`):

. Download the OS-specific OpenShift CLI from [Red Hat](https://mirror.openshift.com/pub/openshift-v4/clients/ocp/latest/).

. Unzip the downloaded file on your local machine.

. Place the extracted `oc` executable in your OS path or local directory.
====
--

[id="{context}-login"]
== Log in to ROSA

* Log in to your ROSA cluster as a user with `cluster-admin` privileges.

[id="{context}-installing-rhacs"]
== Installing Red Hat Advanced Cluster Security in ROSA

To install RHACS in ROSA, you have two options:

* **Option 1**: Manual installation
* **Option 2**: Automated installation using Ansible

[id="{context}-manual-installation"]
=== Option 1: Manual installation

To install RHACS manually:

. Follow the steps within the link:https://redhat-scholars.github.io/acs-workshop/acs-workshop/02-getting_started.html#install_acs_operator[RHACS Operator Installation Workshop] to install the RHACS Operator.

. Follow the steps within the link:https://redhat-scholars.github.io/acs-workshop/acs-workshop/02-getting_started.html#install_acs_central[RHACS Central Cluster Installation Workshop] to install the RHACS Central Cluster.

. Follow the steps within the link:https://redhat-scholars.github.io/acs-workshop/acs-workshop/02-getting_started.html#config_acs_securedcluster[RHACS Secured Cluster Configuration] to import the ROSA cluster into RHACS.

[id="{context}-automated-installation"]
=== Option 2: Automated installation using Ansible

To install RHACS in ROSA, you can use the link:https://github.com/rh-mobb/rhacs-demo[rhacs-demo repository], which will install RHACS using Ansible playbooks:

. Clone the `rhacm-demo` repo and install the galaxy collection:
+
[source,terminal]
----
$ ansible-galaxy collection install kubernetes.core

$ pip3 install kubernetes jmespath

$ git clone https://github.com/rh-mobb/rhacs-demo

$ cd rhacs-demo
----

. Deploy RHACS with the `ansible-playbook` command:
+
--
[source,terminal]
----
$ ansible-playbook rhacs-install.yaml
----

[NOTE]
====
This will install RHACS and also a couple of example apps to demo. If you want just the plain RHACS installation, use the `rhacs-only-install.yaml` playbook.
====
--

[id="{context}-deploying-example-apps"]
== Deploying example apps for demo RHACS

* Deploy some example apps for demo RHACS policies and violations:
+
[source,terminal]
----
$ oc new-project test

$ oc run shell --labels=app=shellshock,team=test-team \
  --image=vulnerables/cve-2014-6271 -n test

$ oc run samba --labels=app=rce \
  --image=vulnerables/cve-2017-7494 -n test
----
